graph TB
    subgraph "AWX Controller"
        AWX[AWX Controller]
        TX[Transmit Phase]
        PX[Process Phase]
    end

    subgraph "Receptor Network"
        RX[Receptor]
    end

    subgraph "Execution Environment Container"
        WK[ftl2-runner worker]

        subgraph "Private Data Dir"
            INV["inventory/"]
            ENV["env/extravars"]
            PB["project/playbook.yml IGNORED"]
        end

        subgraph "Baked-in Script"
            FTL["main.py"]
        end

        subgraph "FTL2 Engine"
            AUTO[automation context]
            EXEC[ModuleExecutor]
        end

        ART["artifacts/"]
    end

    AWX --> TX
    TX -->|stream private_data_dir| RX
    RX -->|unpack| WK
    WK -->|read| INV
    WK -->|read| ENV
    WK -->|execute| FTL
    FTL --> AUTO
    AUTO --> EXEC
    EXEC -->|results| ART
    WK -->|stream events| RX
    RX --> PX
    PX --> AWX
